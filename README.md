# geocoder-flask
deploy on DO

# Веб-сервис для работы с гео-точками ДТП

При работе с данными о ДТП была замечена проблема: многие координаты ДТП не совподают с координатой дороги или находятся далеко от указанного адреса. Данный проект предлагает решение этой проблемы. Принцип работы следующий. 

Приоритетной координатой берется адрес, и если геоточка из протокола удалена от него более чем на 300 метров, алгоритм ее учитывать не будет. Алгоритм заключается в том, что он берёт геоточку здания и проецируем ее на дорогу, то же самое производим с геоточкой из протокола. Между двумя получившимися точками проводим отрезок. Серединой этого отрезка будет нужная точка. 

Гео-кодер представляет из себя СУБД PostgreSQL с организованными и проиндексированными данными городов, улиц и зданий по России, записанными в неё как географические объекты. Доступ, поиск по базе, а также некоторые вычислительные функции реализованы на Python с помощью микрофреймворкома Flask. Однако большая часть вычислений, такие как расчёт расстояния между объектами, проецирование точки на прямую реализовано стандартными функциями PostGIS. Запрос с не обработанными данными о ДТП отправляется с помощью API на сервер, который вычисляет и присылает обратно расчётную точку ДТП. Алгоритм заточен для работы с Русскими улицами, он отлично понимает всевозможные сокращения (ул., обл., г. и т.д.).  

Решение не накладывает искусственных ограничения по запросам в отличии от прочих гео-кодеров.Гео-кодер весит порядка 18 ГБ вместе с индексами и всеми вычислительными инструментами для работы с ДТП данными, что меньше, чем OSM Nominatim (который не так хорошо работает с кириллицей и сокращениями).  
На данный момент ведётся работа по дополнению БД, отладке алгоритмов поиска по ней и вычислений гео-точек.


В данном репозитории находится код самого Веб-сервиса, без БД. 


> Для работы с приложением: https://github.com/Konab/Geocoder_API
